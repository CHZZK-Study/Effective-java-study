## Item 2. ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”ë¥¼ ê³ ë ¤í•˜ë¼

---

### 1. ìƒì„±ìì™€ ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œì˜ í•œê³„
 
> ğŸ¤” **ìƒì„±ìì™€ ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œê°€ ê°€ì§€ê³  ìˆëŠ” ì œì•½ìœ¼ë¡œ ì¸í•´ Builder íŒ¨í„´ì´ íƒ„ìƒí–ˆë‹¤!**  
 
ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, ì„ íƒì  ë§¤ê°œë³€ìˆ˜ê°€ ë§ì€ ê²½ìš° ì ì ˆíˆ ëŒ€ì‘í•˜ê¸°ê°€ ì–´ë µë‹¤.  
ì˜ˆë¥¼ ë“¤ì–´ `ì˜ì–‘ ì„±ë¶„` í´ë˜ìŠ¤ì— `1íšŒ ì œê³µëŸ‰`, `ì¹¼ë¡œë¦¬`, `ì´ ì§€ë°©`, `íŠ¸ëœìŠ¤ì§€ë°©`, `í¬í™”ì§€ë°©`, `ë‹¨ë°±ì§ˆ`, `ë‚˜íŠ¸ë¥¨` ì´ë¼ëŠ” ë©¤ë²„ ë³€ìˆ˜ê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì.  
```java
public class NutritionFacts {
    private final int servingSize;
    private final int calories;
    private final int transFat;
    private final int saturatedFat;
    private final int protein;
    private final int sodium;
}
```
í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.  
ê° ì œí’ˆë§ˆë‹¤ í¬í•¨ë˜ëŠ” ì˜ì–‘ ì„±ë¶„ì´ ë‹¤ ë‹¤ë¥¸ë°, ì´ëŸ¬í•œ ì ì„ ë°˜ì˜í•˜ë ¤ë©´ ìƒì„±ìë˜ ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë˜ ìƒê´€ì—†ì´ ìƒì„±í•˜ëŠ” ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ê°œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.  

ì´ì— ëŒ€í•´ ìš°ë¦¬ëŠ” ì„¸ ê°€ì§€ì˜ í•´ê²°ì±…ì„ ê°€ì§€ê³  ìˆë‹¤.  
ì²« ë²ˆì§¸ë¡œ `ì ì¸µì  ìƒì„±ì íŒ¨í„´`, ë‘ ë²ˆì§¸ëŠ” `ìë°” ë¹ˆì¦ˆ íŒ¨í„´` ë§ˆì§€ë§‰ìœ¼ë¡œëŠ” `ë¹Œë” íŒ¨í„´`ì´ë‹¤.   
ê° í•´ê²°ì±…ì´ ì–´ë–¤ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆê³  ê·¸ë˜ì„œ ì™œ `ë¹Œë” íŒ¨í„´`ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ ì•Œì•„ë³´ì!

<br>

<br>

#### ğŸ’¡ í•´ê²°ì±… 1 - ì ì¸µì  ìƒì„±ì íŒ¨í„´(telescoping constructor pattern)
> ì ì¸µì  ìƒì„±ì íŒ¨í„´ì´ë€ ìƒì„±ìë¥¼ ë§¤ê°œë³€ìˆ˜ì˜ ê°œìˆ˜ë§Œí¼ êµ¬ì„±í•˜ëŠ” íŒ¨í„´ì„ ë§í•œë‹¤.

```java
public class NutritionFacts {
    private final int servingSize;
    private final int calories;
    private final int transFat;
    private final int protein;
    private final int sodium;
    
    public NutritionFacts(int servingSize, int calories) {
        this.servingSize = servingSize;
        this.calories = calories;
    }
    
    public NutritionFacts(int servingSize, int calories, int transFat){
        this.servingSize = servingSize;
        this.calories = calories;
        this.transFat = transFat;
    }

    public NutritionFacts(int servingSize, int calories, int transFat, int protein, int sodium){
        this.servingSize = servingSize;
        this.calories = calories;
        this.transFat = transFat;
        this.protein = protein;
        this.sodium = sodium;
    }
}

```

ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ ì¡°ê±´ì— ë”°ë¼ì„œ ìƒì„±ìì— ì „ë‹¬í•˜ëŠ” ê°’ì´ ë‹¬ë¼ì§„ë‹¤ë©´ â†’ ì¡°ê±´ì— ë§ì¶°ì„œ ìƒì„±ìë¥¼ ìƒì„±í•´ì•¼ í•  ê²ƒì´ê³  â†’ ê·¸ ê²°ê³¼ ìƒì„±ìì˜ ìˆ˜ê°€ ëŠ˜ì–´ë‚  ê²ƒì´ë‹¤.    

ì´ëŠ” ì‹¬ê°í•œ ë‹¨ì ë“¤ì´ ëª‡ ê°œ ìˆë‹¤.
1. ë§Œì¼ ë§¤ê°œë³€ìˆ˜ì˜ ìˆ˜ê°€ ë” ëŠ˜ì–´ë‚œë‹¤ë©´, ì ì¸µì  ìƒì„±ì íŒ¨í„´ì„ ì‚¬ìš©í•œ ìœ„ì˜ ì½”ë“œë³´ë‹¤ ê°€ë…ì„±ì´ ë”ìš± ì•ˆ ì¢‹ì•„ì§ˆ ê²ƒì´ë‹¤. <br>
    ì½”ë“œë¥¼ ì½ì„ ë•Œ ê° ê°’ì˜ ì˜ë¯¸ê°€ ë¬´ì—‡ì¸ì§€ë„ í—·ê°ˆë¦´ ê²ƒì´ê³ , ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§ˆ ë–„ì—ëŠ” ë”ìš± ë³µì¡í•´ì§ˆ ê²ƒì´ë‹¤.
2. íƒ€ì…ì´ ê°™ì€ ë§¤ê°œë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œ ìˆëŠ” ê²½ìš° ì°¾ê¸° ì–´ë ¤ìš´ ë²„ê·¸ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤.
3. í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤ìˆ˜ë¡œ ë§¤ê°œë³€ìˆ˜ì˜ ìˆœì„œì˜ ë°”ê¿” ê±´ë„¤ì¤˜ë„ ì»´íŒŒì¼ëŸ¬ëŠ” ì•Œì•„ì±„ì§€ ëª»í•˜ê³  ëŸ°íƒ€ì„ ì—ëŸ¬ë¡œ ì´ì–´ì§„ë‹¤.

ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë‚˜íƒ€ë‚œ íŒ¨í„´ì´ `ìë°” ë¹ˆì¦ˆ íŒ¨í„´(Java bean pattern)`ì´ë‹¤.

<br>

<br>

#### ğŸ’¡ í•´ê²°ì±… 2 - ìë°” ë¹ˆì¦ˆ íŒ¨í„´(Java bean pattern)
> ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ìë¡œ ê°ì²´ë¥¼ ë§Œë“  í›„, setter ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì„ ì„¤ì •í•˜ëŠ” ë°©ì‹

```java
public class NutritionFacts {
    private final int servingSize;
    private final int calories;
    private final int transFat;
    private final int protein;
    private final int sodium;
    
    public NutritionFacts() { }
    
    public void setServingSize(int val) { servingSize = val; }
    public void setCalories(int val) { calories = val; }
    public void setTransFat(int val) { transFat = val; }
    public void setProtein(int val) { protein = val; }
    public void setSodium(int val) {sodium = val; } 
}
```

```
NutritionFacts nutrition = new NutritionFacts();
nutrition.setServingSize(100);
nutrition.setCalories(324);
nutrition.setTransFat(60);
nutrition.setProtein(17);
nutrition.setSodium(100);
```

í™•ì‹¤íˆ `ì ì¸µì  ìƒì„±ì íŒ¨í„´`ì—ì„œ ë³¼ ìˆ˜ ìˆì—ˆë˜ ë‹¨ì ë“¤(ìˆ˜ ë§ì€ ìƒì„±ì ë©”ì„œë“œë“¤)ì´ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.  
ì½”ë“œê°€ ì¡°ê¸ˆ ë” ê¸¸ì–´ì§€ê¸´ í–ˆì§€ë§Œ, ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì‰¬ìš°ë©° ë” ì½ê¸° ì‰¬ìš´ ì½”ë“œê°€ ë˜ì—ˆë‹¤.

í•˜ì§€ë§Œ `ìë°” ë¹ˆì¦ˆ íŒ¨í„´`ì—ëŠ” ì‹¬ê°í•œ ë‹¨ì ì´ ìˆë‹¤.  
1. ê°ì²´ê°€ ì™„ì „íˆ ìƒì„±ë˜ê¸° ì´ì „ê¹Œì§€ëŠ” ì¼ê´€ì„±(consistency)ê°€ ë¬´ë„ˆì§„ ìƒíƒœì— ë†“ì¸ë‹¤.
2. ê° í”„ë¡œí¼í‹°ë“¤ì— ëŒ€í•´ setter ë©”ì„œë“œë“¤ì´ ëª¨ë‘ ì„ ì–¸ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ë‹¤. <br>
   setterê°€ ì—´ë ¤ìˆê¸° ë•Œë¬¸ì— ì˜ë„ì¹˜ ì•Šê²Œ í˜¹ì€ ê³ ì˜ì ìœ¼ë¡œ ì™¸ë¶€ì—ì„œ setterë¥¼ í†µí•´ ê°ì²´ì˜ ê°’ì„ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. ìº¡ìŠí™”/ì •ë³´ì€ë‹‰ì„ ì§€í‚¬ ìˆ˜ ì—†ê²Œ ëœë‹¤.
3. ìŠ¤ë ˆë“œ ì•ˆì „ì„±ì„ ì–»ê¸° ìœ„í•´ì„œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì¶”ê°€ ì‘ì—…ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤.

ì´ëŸ¬í•œ ë‹¨ì ì„ ëª¨ë‘ ë³´ì™„í•˜ê³ , ì ì¸µì  ìƒì„±ì íŒ¨í„´ì˜ ì•ˆì „ì„±ê³¼ ìë°” ë¹ˆì¦ˆ íŒ¨í„´ì˜ ê°€ë…ì„±ì´ë¼ëŠ” ì¥ì ì„ ê°€ì§€ê³  íƒ„ìƒí•œ ê²ƒì´ ë°”ë¡œ `Builder pattern`ì´ë‹¤.

<br>

<br>

#### ğŸ’¡ í•´ê²°ì±… 3 - ë¹Œë” íŒ¨í„´(Builder pattern)

> í•„ìš”í•œ ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“œëŠ” ëŒ€ì‹ , í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ë§Œìœ¼ë¡œ ìƒì„±ì(or ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ)ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¹Œë” ê°ì²´ë¥¼ ì–»ê³ ,  
> setter ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ì›í•˜ëŠ” ê°’ì„ ì¶”ê°€ì ìœ¼ë¡œ ì„¤ì •, ë§ˆì§€ë§‰ìœ¼ë¡œ `build()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ í•„ìš”í•œ ê°ì²´ë¥¼ ì–»ëŠ” íŒ¨í„´ì„ ë§í•œë‹¤.

```java
public class NutritionFacts {
    private final int servingSize;
    private final int calories;
    private final int transFat;
    private final int protein;
    private final int sodium;

    public static class Builder {
        private final int servingSize;
        private final int calories;

        private int transFat;
        private int protein;
        private int sodium;
        
        public Builder(int servingSize, int calories) {
            this.servingSize = servingSize;
            this.calories = calories;
        }
        
        public Builder transFat(int val) {
            calories = val;
            return this;
        }

        public Builder protein(int val) {
            protein = val;
            return this;
        }

        public Builder sodium(int val) {
            sodium = val;
            return this;
        }
        
        public NutritionFacts build() {
            return new NutritionFacts(this);
        }
    }
    
    private NutritionFacts(Builder builder) {
        this.servingSize = builder.servingSize;
        this.calories = builder.calories;
        this.transFat = builder.transFat;
        this.protein = builder.protein;
        this.sodium = builder.sodium;
    }
}
```


ìœ„ì˜ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë°‘ê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ 
```java
NutritionFacts pepsi = new NutritionFacts().Builder(240, 8)
        .transFat(12)
        .protein(3)
        .sodium(35)
        .build();
```

`Builder pattern`ì€ ì—¬ëŸ¬ê°€ì§€ ì¥ì ì´ ìˆë‹¤.  
1. ìš°ì„  `ì ì¸µì  ìƒì„±ì íŒ¨í„´`ì—ì„œì˜ ìˆ˜ ë§ì€ ìƒì„±ìì™€ ê·¸ì— íŒŒìƒë˜ëŠ” ë‹¤ì–‘í•œ ë‹¨ì ë“¤ì„ ë³´ì™„í•  ìˆ˜ ìˆë‹¤.  
2. ê±°ê¸°ì— `Java beans pattern`ì—ì„œì˜ setter ë©”ì„œë“œë„ ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— `ë¶ˆë³€ ê°ì²´`ë¡œ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©°, ë™ì‹œì— ìº¡ìŠí™”ì™€ ì •ë³´ì€ë‹‰ë„ ì§€í‚¬ ìˆ˜ ìˆë‹¤.
3. ìƒì„±ì(ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ)ì™€ëŠ” ë‹¬ë¦¬ ë©¤ë²„ ë³€ìˆ˜ê°€ ì„ ì–¸ëœ ìˆœì„œëŒ€ë¡œ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. <br>
   `NutritionFacts` í´ë˜ìŠ¤ì—ì„œëŠ” `sodium`ì´ ì œì¼ ë§ˆì§€ë§‰ì— ì„ ì–¸ëœ ë³€ìˆ˜ì´ì§€ë§Œ,  `.sodium()`ì˜ ìœ„ì¹˜ëŠ” ì´ì— ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.

Builder í´ë˜ìŠ¤ì˜ setter ë©”ì„œë“œë¥¼ í†µí•´ ê°’ì„ ì„¤ì •í•˜ê³ , `Builder ìê¸° ìì‹  ê°ì²´`ë¥¼ ë°˜í™˜í•¨ìœ¼ë¡œì„œ ì—°ì‡„ì ì¸ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆë‹¤.  
ìê¸° ìì‹ ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì—°ì‡„ì ì¸ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ê³ , ì´ëŸ¬í•œ ë°©ì‹ì„ `Fluent API` í˜¹ì€ `Method chaining`ì´ë¼ê³  í•œë‹¤.

<br>

<br>

### 2. Builder patternì—ì„œì˜ ìœ íš¨ì„± ê²€ì‚¬
`Builder` í´ë˜ìŠ¤ë¥¼ ë‚´ë¶€ì— ì§ì ‘ êµ¬í˜„í•˜ëŠ” ê²½ìš°,  
1ï¸âƒ£ Builder í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì— ì…ë ¥ëœ ë§¤ê°œë³€ìˆ˜ë¥¼ ê²€ì‚¬í•˜ê³   2ï¸âƒ£ build()ì—ì„œ í˜¸ì¶œí•˜ëŠ” ìƒì„±ìì—ì„œ í•œ ë²ˆ ë” ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤.  
ê° ë³€ìˆ˜ë§ˆë‹¤ ì„¤ì •í•˜ëŠ” ë©”ì„œë“œê°€ ë”°ë¡œ ìˆìœ¼ë¯€ë¡œ, ê²€ì¦ì„ í•˜ëŠ” ë„ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ê°€ ì˜ëª»ë˜ì—ˆëŠ”ì§€ ìì„¸íˆ ì•Œë ¤ì£¼ê¸° ìš©ì´í•˜ë‹¤.

<br>

<br>


### 3. ê³„ì¸µ êµ¬ì¡°(ìƒì† ê´€ê³„)ì—ì„œì˜ Build pattern

`Builder íŒ¨í„´`ì€ ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê·¸ ì‹œë„ˆì§€ê°€ ëŠ˜ì–´ë‚œë‹¤.  

ê° ê³„ì¸µì˜ í´ë˜ìŠ¤ì— ê´€ë ¨ ë¹Œë”ë¥¼ ë©¤ë²„ë¡œ ì •í•œë‹¤. ì´ ë•Œ, ì¶”ìƒ í´ë˜ìŠ¤ëŠ” ì¶”ìƒ ë¹Œë”(abstract builder)ë¥¼, êµ¬ì²´ í´ë˜ìŠ¤ëŠ” êµ¬ì²´ ë¹Œë”(concrete builder)ë¥¼ ê°–ê²Œ í•œë‹¤.




### Springì—ì„œì˜ Builder pattern ì ìš©

ì´ëŸ° Builder patternì—ë„ ë‹¨ì ì€ ì¡´ì¬í•œë‹¤.  
ë°”ë¡œ ê° í´ë˜ìŠ¤ë§ˆë‹¤ `Builder` í´ë˜ìŠ¤ë¥¼ ë‚´ë¶€ì— ìƒì„±í•´ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸(Boilerplate) ì½”ë“œê°€ ë°œìƒí•œë‹¤.

Springì—ì„œëŠ” `Lombok` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ ì†ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.


```java
@Builder
public class NutritionFacts {
    private final int servingSize;
    private final int calories;
    private final int transFat;
    private final int protein;
    private final int sodium;
}
```



