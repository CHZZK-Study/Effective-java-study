# 12.toString을 항상 재정의하라

toString 메서드의 일반규약에 따르면 '간결하고 읽기 쉬운 형태의 유익한 정보'를 반환 해야 한다.
하지만 대부분의 클래스에 대한 toString은 단순히 ```클래스_이름@16진수로_표시한_해시코드```를 반환할 뿐이다.
또한 toString의 규약은 '모든 하위 클래스에서 이 메서드를 재정의하라'고 한다.

toString을 잘 구현한 클래스는 사용하기에 훨씬 좋고, 디버깅도 쉽다.

toString은 그 객체가 가진 주요 정보를 모두 반환하는 게 좋다. 하지만 객체가 거대하거나 객체의 산태가 문자열로 표현하기에 적합하지 않다면 무리가 있다. 다음은 toString에 주요 정보가 담기지 않았을 때 문제가 되는 대표적인 예이다.
```
Assertion failure: expected {abc, 123} but was {abc, 123}
// 실패: 예상값{abc, 123}, 실젯값 {abc, 123}
```

이런 부분 때문에 toString을 구현할 때면 반환값의 포맷을 문서화할지 정해야 한다. 포맷을 명시하기로 했다면, 명시한 포맷에 맞는 문자열과 객체를 상호 전화할 수 있는 정적 팩터리나 생성자를 함께 제공해주면 좋다.
물론 포맷을 한번 명시하면 평생 그 포맷에 얽매이게 되므로 포맷을 명시하려면 아주 정확하게 해야한다. 포맷을 명시하지 않더라도 의도는 명확히 밝혀야 할 것이다.

포맷 명시 여부와 상관없이 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자. 예를 들어 PhoneNumber 클래스는 지역 코드, 프리픽스, 가입자 번호용 접근자를 제공해야한다. 그렇지 않으면 이 정보가 필요한 프로그래머는 toString의 반환값을 파싱할 수밖에 없다. 성능이 나빠지고, 필요하지도 않은 작업이다. 게다가 향후 포맷을 바꾸면 시스템이 망가지는 결과를 초래할 수 있다. 접근자를 제공하지 않으면 그 포맷이 사실상 준-표준 API나 다름없어진다.

정적 유틸리티 클래스는 toString을 제공할 이유가 없다. 또한 대부분의 열거 타입도 자바가 이미 완벽한 toString을 제공하니 따로 재정의하지 않아도 된다.(하지만 하위 클래스들이 공유해야 할 문자열 표현이 있는 추상 클래스라면 필요하다.)

앞서 소개했던 AutoValue 프레임워크는 toString도 생성해 준다. 하지만 이는 각 필드의 내용을 나타내주기는 하지만 클래스의 '의미'까지는 파악하지 못한다. 해당 프레임워크를 이용할 때는 자동 생성에 적합한 클래스인지 고민해보고 생성하도록 하자.